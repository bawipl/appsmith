{
  "gitSyncId": "67a2400b3e12e107acd1a186_asset-swap-recent",
  "id": "Asset Swap_RecentSwapsQuery",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "-- Show recent swap transactions (operations grouped together)\nSELECT \n  co.operation_group AS swap_id,\n  MIN(co.date) AS swap_date,\n  STRING_AGG(DISTINCT co.owner_id, ' <-> ') AS parties,\n  STRING_AGG(\n    CASE WHEN co.direction = 'out' \n    THEN co.owner_id || ' sent ' || co.amount || ' ' || c.shortcode || ' on ' || p.name\n    ELSE NULL END,\n    ' | '\n  ) AS movements,\n  COUNT(*) AS operation_count\nFROM cashoperations co\nJOIN currencies c ON c.\"ID\" = co.currency_id\nJOIN platforms p ON p.id = co.platform_id\nWHERE co.description LIKE 'Swap%'\nGROUP BY co.operation_group\nHAVING COUNT(*) = 4\nORDER BY MIN(co.date) DESC\nLIMIT 20;",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "WieczorekAssets",
      "isAutoGenerated": false,
      "name": "WieczorekAssets",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [],
    "name": "RecentSwapsQuery",
    "pageId": "Asset Swap",
    "runBehaviour": "ON_PAGE_LOAD",
    "userSetOnLoad": false
  }
}